<script>
  // Check for camera permissions
  if (navigator.permissions) {
    navigator.permissions.query({ name: 'camera' }).then(permission => {
      if (permission.state === 'denied' || permission.state === 'prompt') {
        console.error('Camera access denied or not granted.');
        alert('Please allow camera access for AR functionality.');
      } else {
        // If permission is granted, access the camera
        startCamera();
      }
    });
  } else {
    // If the browser doesn't support permissions API, directly try to start the camera
    startCamera();
  }

  function startCamera() {
    const video = document.getElementById('cameraFeed');
    navigator.mediaDevices.getUserMedia({ video: true })
      .then((stream) => {
        video.srcObject = stream;
        console.log('Camera access granted and feed is playing.');
      })
      .catch((err) => {
        console.error('Camera access denied:', err);
        alert('Failed to access camera: ' + err.message);
      });
  }
</script>
